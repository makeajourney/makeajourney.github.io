---
title : "git 사용하기"
layout: post
---


[TOC]



# git

깃 설명 자리
다른 vcs와의 차이점
특징


## 사용법  
console 기준으로 작성  
(Windows : Git Bash)  


### git 설치  
<http://git-scm.com>에서 OS에 맞는 클라이언트를 설치한다.  
OSX 에서는 homebrew를 이용하면 편리하다. (<http://brew.sh> 참고)  


#### 버전 확인  
설치가 정상적으로 진행되고 나면 `git --version` 명령어를 실행한다.  
`git version x.x.x...` 와 같은 메시지가 출력되면 설치에 성공한 것이다.  


### 사용자 정보 등록  
변경 내역에 반영될 사용자 정보의 등록이 필요하다. 이 정보를 등록하지 않으면 누가 변경했는지 제대로 표시되지 않기 때문에 등록이 필요하다.  
```{.bash}
git config --global user.name "<사용자명>"
git config --global user.email "<메일 주소>"
```  


### 저장소(Repository) 생성  
저장소를 생성할 때는 `git init` 명령을 사용한다.  
프로젝트 폴더를 생성하고, 해당 폴더로 이동한 다음 위 명령을 사용하면 저장소가 생성된다.  
```{.bash}
mkdir tutorial
cd tutorial
git init
```  
저장소가 생성되면 `Initialized empty Git repository in "경로..."/tutorial/.git/` 메시지를 확인 할 수 있다.  


### 저장소 상태 확인
저장소 내의 폴더와 파일, 작업트리와 인덱스 상태 확인을 할 때 `git status` 명령을 사용한다.  
sample.txt 파일을 생성한 뒤 `git status`명령을 입력하면 아래와 같은 출력을 볼 수 있다.  
현재 브랜치, untracked files이 출력됨을 알 수 있다.  

```{.bash}
kimsy-iMac:tutorial kimsoyoun$ git status
On branch master

Initial commit

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	sample.txt

nothing added to commit but untracked files present (use "git add" to track)
```  


### commit
변경 이력을 기록.  
커밋할 때는 버그 수정이나 기능 추가 등 특별한 의미가 있는 업데이트를 작업 별로 구분해서 각각 커밋해야 나중에 이력을 보고 특정 변경 내용을 찾기가 편리하다.  
커밋시에는 커밋 메시지를 필수로 입력해야 한다. 메시지는 명료하고 이해하기 쉽게 남겨야 이력을 확인하기 쉽다. 아래는 git에서 권장하는 메시지 형식이다.  
```{.bash}
line 1 : 커밋 내의 변경 내용을 요약
line 2 : 빈칸
line 3 : 변경한 이유
```  


#### 커밋 할 파일을 인덱스(index)에 등록  
인덱스 대신 스테이지(stage)라고도 부른다.  
커밋을 하기 전에 커밋할 대상 파일을 인덱스에 등록해야 한다.  
`git add` 명령을 이용해서 파일을 인덱스에 등록한다.  
```{.bash}
git add <file>
```  

파일명을 띄어쓰기 하여 **여러개의 파일** 을 한번에 등록할 수 있다.  
```{.bash}
git add <file1> <file2> ...
```   

파일 명 대신 `.` 을 쓰면 **모든 파일** 을 한번에 등록할 수 있다.  
```{.bash}
git add .
```  


파일을 등록한 후 다시 status 명령을 통해 확인 해 보면, 새로운 파일로 sample.txt가 stage 된 것을 확인 할 수 있다.  

```{.bash}
kimsy-iMac:tutorial kimsoyoun$ git add sample.txt
kimsy-iMac:tutorial kimsoyoun$ git status
On branch master

Initial commit

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

	new file:   sample.txt

```  


#### 커밋 명령 실행
아래 `git commit` 명령을 사용하여 커밋을 실행한다.  
```{.bash}
git commit -m "커밋메시지"
```  


커밋 후 상태 확인.  

```{.bash}
kimsy-iMac:tutorial kimsoyoun$ git commit -m "first commit"
[master (root-commit) a2ec9c7] first commit
 1 file changed, 1 insertion(+)
 create mode 100644 sample.txt
kimsy-iMac:tutorial kimsoyoun$ git status
On branch master
nothing to commit, working directory clean
kimsy-iMac:tutorial kimsoyoun$
```  


#### 변경 이력 확인  
`git log` 명령을 이용해 변경 이력을 볼 수 있다.  

```{.bash}
kimsy-iMac:tutorial kimsoyoun$ git log
commit a2ec9c702dfe8bab2a6032c0b78c4e5eb6c1f6b4
Author: KimSoyoun <kimsy@selim.co.kr>
Date:   Wed Aug 17 11:22:00 2016 +0900

    first commit
```  


### 원격 저장소(Remote Repository) 설정  
commit을 push 하기 이전에 원격 저장소의 설정이 필요하므로, 원격 저장소를 설정하는 방법을 먼저 설명한다.  
```{.bash}
git remote add <name> <url>
```  
보통 원격 저장소의 이름으로 origin을 많이 사용한다.  
push나 pull을 할 때 원격저장소의 이름을 생락햐면, origin이라는 이름의 원격 저장소를 사용한다. 그래서 보통의 경우 origin을 붙인다.  
```{.bash}
git remote add origin https://github.com/makeajourney/tutorial.git
```  

여기서는 github의 http 주소를 사용했다.  
ssh 주소도 사용 할 수 있는데, ssh key를 사용하면 github의 id나 비밀번호를 입력하지 않아도 되서 편리하다.  

### push  
push는 로컬저장소의 변경내역(commit)을 원격 저장소에 반영하는 기능이다.  
이를 위해서는 원격저장소가 필요하다.  
원하는 곳의 원격 저장소를 생성하거나, 기존 원격 저장소를 이용하여 원격 저장소 설정을 한 다음 푸시를 진행한다.  

아래 명령을 사용하여 푸시를 한다. 푸시 할 때는 remote repository name, remote branch를 명시한다.  
```{.bash}
git push <repository> <branch>
```  

아래는 origin이라는 원격저장소의 master 브랜치에 푸시한다.  
-u 옵션을 추가하면, 다음에 push 할 때 해당 브랜치명을 명시하지 않아도 된다.  
```{.bash}
git push -u origin master
```  


### clone (원격 저장소 복제)  
원격 저장소를 통째로 다운로드하는 것을 의미한다.  
clone하면 변경이력도 함께 복제되어, 이 이력을 참조하고 커밋도 진행할 수 있다.  
아래 명령 `git clone`을 사용하여 복제한다. remote repository url과, 로컬에 저장할 폴더 명을 입력하고 명령을 실행한다.  
```{.bash}
git clone <repository> <directory>
```  


### pull  
원격 저장소에서 여러사람이 함께 작업을 할 때, 다른 사람의 변경 사항을 내 로컬 저장소에도 반영하기 위해 pull을 사용한다.  
원격 저장소 주소와 원격 브랜치명을 명시해야 한다.  
```{.bash}
git pull <repository> <branch>
```    

pull은 원격 브랜치의 변경사항을 가져와서 내 저장소와 merge한다. 그러므로 충돌이 발생할 수 있다.  
그런 경우에는 fetch하여 원격 브랜치의 변경사항을 가져 온 후 이를 로컬저장소의 브랜치와 merge한 다음 이를 commit하여 해결해야 한다.  
(fetch > merge > commit)  
pull된 내역은 `git log` 명령으로 확인하면 된다.  


### merge  
```{.bash}
git push
Username: <사용자명>
Password: <비밀번호>
To https://github.com/makeajourney/tutorial.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://github.com/makeajourney/tutorial.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details.
```  
push 명령을 실행했을 때, (혹은 pull 명령을 실행했을 때도) 이런 상황을 만날 수 있다.  
이미 원격에 변경된 사항이 내가 변경하려는 부분과 충돌하는 경우이다.  
이런 경우, git은 충돌이 발생했음을 메시지로 알리고, 충돌되는 부분을 파일에 표시해준다.  
이 파일을 열어서 충돌한 부분을 확인하고, merge한 다음, 변경사항 반영을 위해 커밋한다.  
그런 다음 다시 push(혹은 pull) 명령을 실행하면, 병합된 내용이 merge 되었음을 확인 할 수 있다.  


### branch  
위처럼, push나 pull 작업을 할 때 충돌 할 가능성이 있다. 그러다보면 상대방의 코드에 영향을 줄 수도 있고 또 내 작업에 영향을 받을 수도 있다.  
이런 상황을 방지하기 위해 브랜치 기능을 적극 활용하는 것이 좋다.  

여러 명이서 동시에 작업을 할 때에 다른 사람의 작업에 영향을 주거나 받지 않도록, 먼저 메인 브랜치에서 자신의 작업 전용 브랜치를 만듭니다. 그리고 각자 작업을 진행한 후, 작업이 끝난 사람은 메인 브랜치에 자신의 브랜치의 변경 사항을 적용합니다. 이렇게 함으로써 다른 사람의 작업에 영향을 받지 않고 독립적으로 특정 작업을 수행하고 그 결과를 하나로 모아 나가게 됩니다. 이러한 방식으로 작업할 경우 '작업 단위', 즉 브랜치로 그 작업의 기록을 중간 중간에 남기게 되므로 문제가 발생했을 경우 원인이 되는 작업을 찾아내거나 그에 따른 대책을 세우기 쉬워집니다.
 




### commit 변경




### pull request




### tag

